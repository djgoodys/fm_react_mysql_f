{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import img_cancel from\"../images/cancel.png\";import dwcheckyes from\"../images/dwcheckyes.png\";import{manageTasks}from\"../thunks/tasksThunk\";import{useDispatch,useSelector}from\"react-redux\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Tasks=()=>{const dispatch=useDispatch();const[tasks,setTasks]=useState([]);const Style={img_cancel:{width:'30px',height:'30px'},td:{textAlign:'center',padding:'15px 15px 15px 15px',fontSize:'1em'},th:{textAlign:'center',fontSize:'1em'}};const fetchTasks=async()=>{const username=localStorage.getItem(\"username\");const obj={action:\"get_all_tasks\",username:username};const response=await dispatch(manageTasks(obj));//const tasksArray = Array.isArray(response.payload) ? response.payload : response.payload.data;\n};useEffect(()=>{fetchTasks();},[dispatch]);const tasksArray=useSelector(state=>state.tasks.tasks);useEffect(()=>{setTasks(tasksArray);console.log(\"tasks=\"+tasks);},[tasksArray]);const completeTask=async(id,rotation,filter_type)=>{const username=localStorage.getItem(\"username\");const obj={action:\"complete-task\",unit_id:id,username:username,rotation:rotation,filter_type:filter_type};const response=await dispatch(manageTasks(obj));};const cancelTask=async id=>{const username=localStorage.getItem(\"username\");const obj={action:\"cancel-task\",unit_id:id,username:username};const response=await dispatch(manageTasks(obj));};return/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"40px\",display:\"flex\",justifyContent:\"center\"},children:tasks.length==0?/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:\"black\",color:\"white\",widt:\"100%\",padding:\"20px\"},children:\"You have no tasks\"}):/*#__PURE__*/_jsxs(\"table\",{id:\"tblTasks\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:Style.th,children:\"Cancel task\"}),/*#__PURE__*/_jsx(\"th\",{style:Style.th,children:\"Unit name\"}),/*#__PURE__*/_jsx(\"th\",{style:Style.th,children:\"Unit location\"}),/*#__PURE__*/_jsx(\"th\",{style:Style.th,children:\"Filter size\"}),/*#__PURE__*/_jsx(\"th\",{style:Style.th,children:\"Filter type\"}),/*#__PURE__*/_jsx(\"th\",{style:Style.th,children:\"Complete task\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:tasks.map((task,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:Style.td,children:/*#__PURE__*/_jsx(\"img\",{src:img_cancel,style:Style.img_cancel,onClick:()=>cancelTask(task._id)})}),/*#__PURE__*/_jsx(\"td\",{style:Style.td,children:task.unit_name}),/*#__PURE__*/_jsx(\"td\",{style:Style.td,children:task.location}),/*#__PURE__*/_jsx(\"td\",{style:Style.td,children:task.filter_size}),/*#__PURE__*/_jsx(\"td\",{style:Style.td,children:task.filter_type}),/*#__PURE__*/_jsx(\"td\",{style:Style.td,children:/*#__PURE__*/_jsx(\"img\",{style:Style.img_cancel,src:dwcheckyes,onClick:()=>completeTask(task._id,task.filter_rotation,task.filter_type)})})]},index))})]})});};export default Tasks;","map":{"version":3,"names":["React","useEffect","useState","img_cancel","dwcheckyes","manageTasks","useDispatch","useSelector","jsx","_jsx","jsxs","_jsxs","Tasks","dispatch","tasks","setTasks","Style","width","height","td","textAlign","padding","fontSize","th","fetchTasks","username","localStorage","getItem","obj","action","response","tasksArray","state","console","log","completeTask","id","rotation","filter_type","unit_id","cancelTask","style","marginTop","display","justifyContent","children","length","backgroundColor","color","widt","map","task","index","src","onClick","_id","unit_name","location","filter_size","filter_rotation"],"sources":["C:/xampp/htdocs/fm_react_mysql/src/components/Tasks.jsx"],"sourcesContent":["import React, {useEffect, useState} from \"react\"\r\nimport img_cancel from \"../images/cancel.png\"\r\nimport dwcheckyes from \"../images/dwcheckyes.png\"\r\nimport {manageTasks} from \"../thunks/tasksThunk\"\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\n\r\nconst Tasks = () =>{\r\nconst dispatch = useDispatch()\r\nconst [tasks, setTasks] = useState([])\r\nconst Style = {\r\n    img_cancel : {\r\n        width:'30px',\r\n        height:'30px'\r\n    },\r\n    td: {\r\n        textAlign:'center',\r\n        padding:'15px 15px 15px 15px',\r\n        fontSize:'1em'\r\n    },\r\n    th: {\r\n        textAlign:'center',\r\n        fontSize:'1em'\r\n    }\r\n}\r\n\r\n    const fetchTasks = async () => {\r\n    const username = localStorage.getItem(\"username\")\r\n    const obj={\r\n        action:\"get_all_tasks\",\r\n        username:username\r\n    }\r\n    const response = await dispatch(manageTasks(obj))\r\n    //const tasksArray = Array.isArray(response.payload) ? response.payload : response.payload.data;\r\n}\r\nuseEffect(()=>{\r\nfetchTasks()\r\n}, [dispatch])\r\nconst tasksArray = useSelector((state)=> state.tasks.tasks) \r\nuseEffect(()=>{\r\n    setTasks(tasksArray)\r\n    console.log(\"tasks=\" + tasks)\r\n}, [tasksArray])\r\n\r\nconst  completeTask = async (id, rotation, filter_type) =>{\r\n    const username = localStorage.getItem(\"username\")\r\n    const obj={\r\n        action:\"complete-task\",\r\n        unit_id:id,\r\n        username:username,\r\n        rotation:rotation,\r\n        filter_type:filter_type\r\n    }\r\n    const response = await dispatch(manageTasks(obj))\r\n}\r\n\r\nconst cancelTask = async (id) => {\r\n    const username = localStorage.getItem(\"username\")\r\n    const obj={\r\n        action:\"cancel-task\",\r\n        unit_id:id,\r\n        username:username\r\n    }\r\n    const response = await dispatch(manageTasks(obj))\r\n}\r\n\r\nreturn (\r\n    <div style={{marginTop:\"40px\", display:\"flex\", justifyContent:\"center\"}}>\r\n        {tasks.length == 0 ? (<div style={{backgroundColor:\"black\", color:\"white\", widt:\"100%\", padding:\"20px\"}}>You have no tasks</div>):\r\n        (<table id=\"tblTasks\">\r\n            <thead>\r\n                <tr>\r\n                    <th style={Style.th}>Cancel task</th>\r\n                    <th style={Style.th}>Unit name</th>\r\n                    <th style={Style.th}>Unit location</th>\r\n                    <th style={Style.th}>Filter size</th>\r\n                    <th style={Style.th}>Filter type</th>\r\n                    <th style={Style.th}>Complete task</th>\t\t\t\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {tasks.map((task, index)=>\r\n                    (<tr key={index}>\r\n                        <td style={Style.td}><img src={img_cancel} style={Style.img_cancel} onClick={()=>cancelTask(task._id)} /></td>\r\n                        <td style={Style.td}>{task.unit_name}</td>\r\n                        <td style={Style.td}>{task.location}</td>\r\n                        <td style={Style.td}>{task.filter_size}</td>\r\n                        <td style={Style.td}>{task.filter_type}</td>\r\n                        <td style={Style.td}><img style={Style.img_cancel} src={dwcheckyes} onClick={()=>completeTask(task._id, task.filter_rotation, task.filter_type)} /></td>\r\n                    </tr>)\r\n                )}\r\n            </tbody>\r\n        </table>)}\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default Tasks"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CAChD,MAAO,CAAAC,UAAU,KAAM,sBAAsB,CAC7C,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CACjD,OAAQC,WAAW,KAAO,sBAAsB,CAChD,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAGvD,KAAM,CAAAC,KAAK,CAAGA,CAAA,GAAK,CACnB,KAAM,CAAAC,QAAQ,CAAGP,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACQ,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAAc,KAAK,CAAG,CACVb,UAAU,CAAG,CACTc,KAAK,CAAC,MAAM,CACZC,MAAM,CAAC,MACX,CAAC,CACDC,EAAE,CAAE,CACAC,SAAS,CAAC,QAAQ,CAClBC,OAAO,CAAC,qBAAqB,CAC7BC,QAAQ,CAAC,KACb,CAAC,CACDC,EAAE,CAAE,CACAH,SAAS,CAAC,QAAQ,CAClBE,QAAQ,CAAC,KACb,CACJ,CAAC,CAEG,KAAM,CAAAE,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC/B,KAAM,CAAAC,QAAQ,CAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CACjD,KAAM,CAAAC,GAAG,CAAC,CACNC,MAAM,CAAC,eAAe,CACtBJ,QAAQ,CAACA,QACb,CAAC,CACD,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAjB,QAAQ,CAACR,WAAW,CAACuB,GAAG,CAAC,CAAC,CACjD;AACJ,CAAC,CACD3B,SAAS,CAAC,IAAI,CACduB,UAAU,CAAC,CAAC,CACZ,CAAC,CAAE,CAACX,QAAQ,CAAC,CAAC,CACd,KAAM,CAAAkB,UAAU,CAAGxB,WAAW,CAAEyB,KAAK,EAAIA,KAAK,CAAClB,KAAK,CAACA,KAAK,CAAC,CAC3Db,SAAS,CAAC,IAAI,CACVc,QAAQ,CAACgB,UAAU,CAAC,CACpBE,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAGpB,KAAK,CAAC,CACjC,CAAC,CAAE,CAACiB,UAAU,CAAC,CAAC,CAEhB,KAAO,CAAAI,YAAY,CAAG,KAAAA,CAAOC,EAAE,CAAEC,QAAQ,CAAEC,WAAW,GAAI,CACtD,KAAM,CAAAb,QAAQ,CAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CACjD,KAAM,CAAAC,GAAG,CAAC,CACNC,MAAM,CAAC,eAAe,CACtBU,OAAO,CAACH,EAAE,CACVX,QAAQ,CAACA,QAAQ,CACjBY,QAAQ,CAACA,QAAQ,CACjBC,WAAW,CAACA,WAChB,CAAC,CACD,KAAM,CAAAR,QAAQ,CAAG,KAAM,CAAAjB,QAAQ,CAACR,WAAW,CAACuB,GAAG,CAAC,CAAC,CACrD,CAAC,CAED,KAAM,CAAAY,UAAU,CAAG,KAAO,CAAAJ,EAAE,EAAK,CAC7B,KAAM,CAAAX,QAAQ,CAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CACjD,KAAM,CAAAC,GAAG,CAAC,CACNC,MAAM,CAAC,aAAa,CACpBU,OAAO,CAACH,EAAE,CACVX,QAAQ,CAACA,QACb,CAAC,CACD,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAjB,QAAQ,CAACR,WAAW,CAACuB,GAAG,CAAC,CAAC,CACrD,CAAC,CAED,mBACInB,IAAA,QAAKgC,KAAK,CAAE,CAACC,SAAS,CAAC,MAAM,CAAEC,OAAO,CAAC,MAAM,CAAEC,cAAc,CAAC,QAAQ,CAAE,CAAAC,QAAA,CACnE/B,KAAK,CAACgC,MAAM,EAAI,CAAC,cAAIrC,IAAA,QAAKgC,KAAK,CAAE,CAACM,eAAe,CAAC,OAAO,CAAEC,KAAK,CAAC,OAAO,CAAEC,IAAI,CAAC,MAAM,CAAE5B,OAAO,CAAC,MAAM,CAAE,CAAAwB,QAAA,CAAC,mBAAiB,CAAK,CAAC,cAC/HlC,KAAA,UAAOyB,EAAE,CAAC,UAAU,CAAAS,QAAA,eACjBpC,IAAA,UAAAoC,QAAA,cACIlC,KAAA,OAAAkC,QAAA,eACIpC,IAAA,OAAIgC,KAAK,CAAEzB,KAAK,CAACO,EAAG,CAAAsB,QAAA,CAAC,aAAW,CAAI,CAAC,cACrCpC,IAAA,OAAIgC,KAAK,CAAEzB,KAAK,CAACO,EAAG,CAAAsB,QAAA,CAAC,WAAS,CAAI,CAAC,cACnCpC,IAAA,OAAIgC,KAAK,CAAEzB,KAAK,CAACO,EAAG,CAAAsB,QAAA,CAAC,eAAa,CAAI,CAAC,cACvCpC,IAAA,OAAIgC,KAAK,CAAEzB,KAAK,CAACO,EAAG,CAAAsB,QAAA,CAAC,aAAW,CAAI,CAAC,cACrCpC,IAAA,OAAIgC,KAAK,CAAEzB,KAAK,CAACO,EAAG,CAAAsB,QAAA,CAAC,aAAW,CAAI,CAAC,cACrCpC,IAAA,OAAIgC,KAAK,CAAEzB,KAAK,CAACO,EAAG,CAAAsB,QAAA,CAAC,eAAa,CAAI,CAAC,EACvC,CAAC,CACF,CAAC,cACRpC,IAAA,UAAAoC,QAAA,CACK/B,KAAK,CAACoC,GAAG,CAAC,CAACC,IAAI,CAAEC,KAAK,gBAClBzC,KAAA,OAAAkC,QAAA,eACGpC,IAAA,OAAIgC,KAAK,CAAEzB,KAAK,CAACG,EAAG,CAAA0B,QAAA,cAACpC,IAAA,QAAK4C,GAAG,CAAElD,UAAW,CAACsC,KAAK,CAAEzB,KAAK,CAACb,UAAW,CAACmD,OAAO,CAAEA,CAAA,GAAId,UAAU,CAACW,IAAI,CAACI,GAAG,CAAE,CAAE,CAAC,CAAI,CAAC,cAC9G9C,IAAA,OAAIgC,KAAK,CAAEzB,KAAK,CAACG,EAAG,CAAA0B,QAAA,CAAEM,IAAI,CAACK,SAAS,CAAK,CAAC,cAC1C/C,IAAA,OAAIgC,KAAK,CAAEzB,KAAK,CAACG,EAAG,CAAA0B,QAAA,CAAEM,IAAI,CAACM,QAAQ,CAAK,CAAC,cACzChD,IAAA,OAAIgC,KAAK,CAAEzB,KAAK,CAACG,EAAG,CAAA0B,QAAA,CAAEM,IAAI,CAACO,WAAW,CAAK,CAAC,cAC5CjD,IAAA,OAAIgC,KAAK,CAAEzB,KAAK,CAACG,EAAG,CAAA0B,QAAA,CAAEM,IAAI,CAACb,WAAW,CAAK,CAAC,cAC5C7B,IAAA,OAAIgC,KAAK,CAAEzB,KAAK,CAACG,EAAG,CAAA0B,QAAA,cAACpC,IAAA,QAAKgC,KAAK,CAAEzB,KAAK,CAACb,UAAW,CAACkD,GAAG,CAAEjD,UAAW,CAACkD,OAAO,CAAEA,CAAA,GAAInB,YAAY,CAACgB,IAAI,CAACI,GAAG,CAAEJ,IAAI,CAACQ,eAAe,CAAER,IAAI,CAACb,WAAW,CAAE,CAAE,CAAC,CAAI,CAAC,GANlJc,KAON,CACR,CAAC,CACE,CAAC,EACL,CAAE,CACR,CAAC,CAEV,CAAC,CAED,cAAe,CAAAxC,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}