{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import passwordhelp from'../images/passwordhelp.jpg';import{useSelector,useDispatch}from'react-redux';import{Login}from'../thunks/loginThunk';import{manageEquipment}from'../thunks/listEquipmentThunk';import Spinner from'react-bootstrap/Spinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FrmLogin=()=>{const loading=useSelector(state=>state.loading);const error=useSelector(state=>state.error);const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[serverMessage,setServerMessage]=useState('');const txtUserNameRef=useRef(null);const dispatch=useDispatch();const userData=useSelector(state=>state.userData);const[spinner,setSpinner]=useState(false);const[isSubmitting,setIsSubmitting]=useState(false);const submitLogin=async e=>{setServerMessage('');setSpinner(true);if(isSubmitting)return;setIsSubmitting(true);try{const obj={username:username,password:password,action:'login'};const response=await dispatch(Login(obj));if(response.payload.login===\"passed\"){setSpinner(false);dispatch(Login(response.payload));localStorage.setItem(\"admin\",response.payload.admin);const vars={action:\"get-all-equipment\"};dispatch(manageEquipment(vars));localStorage.setItem(\"loggedin\",\"true\");}else{setServerMessage(\"LOGIN ATTEMPT FAILED\");setSpinner(false);setIsSubmitting(false);}}catch(error){console.error(\"Login error:\",error);setIsSubmitting(false);}};useEffect(()=>{localStorage.setItem(\"userData\",JSON.stringify(userData.userData));if(Array.isArray(userData)){}else{}},[userData]);return/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"200px\",display:'flex',flexDirection:\"column\",height:'100%',justifyContent:\"center\",alignItems:\"center\"},children:[spinner===true?/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"0 auto\",fontSize:\"3em\",color:\"blue\"},children:[\"Loading...   \",/*#__PURE__*/_jsx(Spinner,{style:{width:\"100px\",height:\"100px\"},animation:\"border\",variant:\"primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})]}):null,/*#__PURE__*/_jsx(\"div\",{className:serverMessage!==\"\"?\"server-message-visible\":\"server-message-hidden\",id:\"divServerMessage\",children:serverMessage}),/*#__PURE__*/_jsx(\"form\",{id:\"frmLogin\",style:{width:'80%',margin:'auto',display:'flex'},children:/*#__PURE__*/_jsx(\"table\",{id:\"tblLogin\",style:{width:'75%',textAlign:'center'},children:/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"txtUserName\",ref:txtUserNameRef,value:username,onChange:event=>setUsername(event.target.value),placeholder:\"ENTER USER NAME HERE\",name:\"username\",size:\"21\",maxLength:\"10\",style:{marginRight:'auto',marginLeft:'300px',display:'inline-block'}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:event=>setPassword(event.target.value),name:\"password\",value:password,style:{color:'black'},id:\"txtPassword\",autoComplete:\"on\",placeholder:\"ENTER PASSWORD HERE\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"button\",id:\"btnLogon\",className:\"myButton\",name:\"action\",value:\"login\",onClick:event=>submitLogin(event)})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"login_help.php\",title:\"Password help\",target:\"iframe2\",children:/*#__PURE__*/_jsx(\"img\",{src:passwordhelp,style:{width:'40px',boxShadow:'4px 4px black',marginTop:'0px',height:'auto',borderRadius:'50%'},alt:\"Password Help\"})})})]})})})})]});};export default FrmLogin;","map":{"version":3,"names":["React","useState","useRef","useEffect","passwordhelp","useSelector","useDispatch","Login","manageEquipment","Spinner","jsx","_jsx","jsxs","_jsxs","FrmLogin","loading","state","error","username","setUsername","password","setPassword","serverMessage","setServerMessage","txtUserNameRef","dispatch","userData","spinner","setSpinner","isSubmitting","setIsSubmitting","submitLogin","e","obj","action","response","payload","login","localStorage","setItem","admin","vars","console","JSON","stringify","Array","isArray","style","marginTop","display","flexDirection","height","justifyContent","alignItems","children","margin","fontSize","color","width","animation","variant","role","className","id","textAlign","type","ref","value","onChange","event","target","placeholder","name","size","maxLength","marginRight","marginLeft","autoComplete","onClick","href","title","src","boxShadow","borderRadius","alt"],"sources":["C:/xampp/htdocs/fm_react_mysql_f/src/components/FrmLogin.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport passwordhelp from '../images/passwordhelp.jpg'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {Login } from '../thunks/loginThunk'\r\nimport { manageEquipment } from '../thunks/listEquipmentThunk';\r\nimport Spinner from 'react-bootstrap/Spinner';\r\n\r\nconst FrmLogin = () => {\r\n  const loading = useSelector(state => state.loading)\r\n  const error = useSelector(state => state.error)\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [serverMessage, setServerMessage] = useState('')\r\n  const txtUserNameRef = useRef(null)\r\n  const dispatch = useDispatch()\r\n  const userData = useSelector((state) => state.userData)\r\n  const [spinner, setSpinner] = useState(false)\r\n  const [isSubmitting, setIsSubmitting] = useState(false)\r\n\r\n  const submitLogin = async (e) => {\r\n    setServerMessage('')\r\n    setSpinner(true)\r\n\r\n    if (isSubmitting) return\r\n    setIsSubmitting(true)\r\n    try {\r\n      const obj = {\r\n          username: username, \r\n          password: password,\r\n          action: 'login'\r\n      }\r\n      const response = await dispatch(Login(obj));\r\n\r\n      if (response.payload.login === \"passed\") {\r\n          setSpinner(false);\r\n          dispatch(Login(response.payload));\r\n          localStorage.setItem(\"admin\", response.payload.admin);\r\n          const vars = {\r\n             action: \"get-all-equipment\" }\r\n          dispatch(manageEquipment(vars));\r\n          localStorage.setItem(\"loggedin\", \"true\");\r\n      } else {\r\n          setServerMessage(\"LOGIN ATTEMPT FAILED\");\r\n          setSpinner(false);\r\n          setIsSubmitting(false);\r\n      }\r\n  } catch (error) {\r\n      console.error(\"Login error:\", error);\r\n      setIsSubmitting(false);\r\n  }\r\n  \r\n  }\r\n    \r\n  useEffect(() => { \r\n    localStorage.setItem(\"userData\", JSON.stringify(userData.userData))\r\n    if (Array.isArray(userData)) { \r\n    } \r\n    else \r\n    { \r\n      } }, [userData]);\r\n\r\n\r\n  return (\r\n    <div style={{ marginTop:\"200px\",display: 'flex', flexDirection:\"column\", height: '100%', justifyContent:\"center\", alignItems:\"center\" }}>\r\n      {spinner === true? (<div style={{margin:\"0 auto\", fontSize:\"3em\", color:\"blue\"}}>Loading...   <Spinner style={{width:\"100px\", height:\"100px\"}} animation=\"border\" variant=\"primary\" role=\"status\">\r\n        <span className=\"visually-hidden\">Loading...</span>\r\n      </Spinner></div>): null}\r\n      <div className={serverMessage !== \"\" ? \"server-message-visible\" :\"server-message-hidden\"} id=\"divServerMessage\">{serverMessage}</div>\r\n      <form id=\"frmLogin\" style={{ width: '80%', margin: 'auto', display: 'flex' }}>\r\n \r\n \r\n  <table id=\"tblLogin\" style={{width: '75%', textAlign: 'center' }}>\r\n          <tbody>\r\n            <tr>\r\n              <td>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"txtUserName\"\r\n                  ref={txtUserNameRef}\r\n                  value={username}\r\n                  onChange={(event) => setUsername(event.target.value)}\r\n                  placeholder=\"ENTER USER NAME HERE\"\r\n                  name=\"username\"\r\n                  size=\"21\"\r\n                  maxLength=\"10\"\r\n                  style={{ marginRight: 'auto', marginLeft: '300px', display: 'inline-block' }}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"password\"\r\n                  onChange={(event) => setPassword(event.target.value)}\r\n                  name=\"password\"\r\n                  value={password}\r\n                  style={{ color: 'black' }}\r\n                  id=\"txtPassword\"\r\n                  autoComplete=\"on\"\r\n                  placeholder=\"ENTER PASSWORD HERE\"\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"button\"\r\n                  id=\"btnLogon\"\r\n                  className=\"myButton\"\r\n                  name=\"action\"\r\n                  value=\"login\"\r\n                  onClick={(event)=>submitLogin(event)}\r\n                />\r\n              </td>\r\n              <td>\r\n                <a href=\"login_help.php\" title=\"Password help\" target=\"iframe2\">\r\n                  <img\r\n                    src={passwordhelp}\r\n                    style={{ width: '40px', boxShadow: '4px 4px black', marginTop: '0px', height: 'auto', borderRadius: '50%' }}\r\n                    alt=\"Password Help\"\r\n                  />\r\n                </a>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FrmLogin;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}