{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\fm_react_mysql\\\\src\\\\components\\\\Search.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext, useEffect, useRef } from 'react';\nimport { manageEquipment } from '../thunks/listEquipmentThunk';\nimport { useDispatch } from 'react-redux';\nimport searchImage from '../images/search3.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Search = () => {\n  _s();\n  const originalDataRef = useRef([]);\n  const [filteredUnits, setFilteredUnits] = useState([]);\n  let [searchInput, setSearchInput] = useState('');\n  let newFilteredUnits = useRef([]);\n  let [ULClass, setULClass] = useState('ULSearchHidden');\n  let LiSearch = useRef('LiSearch');\n  const [datasource, setdatasource] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const searchInputRef = useRef(null);\n  const [data, setData] = useState([]);\n  const dispatch = useDispatch();\n  const [serverResponse, setServerResponse] = useState('');\n  function submitSearch() {\n    const obj = {\n      searchwords: searchInputRef.current.value,\n      action: 'search'\n    };\n    dispatch(manageEquipment(obj));\n    setULClass('ULSearchHidden');\n  }\n  const toggleClass = classx => {\n    //setULClass(prevClass => (searchInput.length === 0 ? 'ULSearchHidden' : 'ULSearchVisible'));\n\n    switch (classx) {\n      case 'ULSearchVisible':\n        setULClass('ULSearchVisible');\n        break;\n      case 'ULSearchHidden':\n        setULClass('ULSearchHidden');\n        break;\n      default:\n        break;\n    }\n  };\n  const filterUnits = () => {\n    searchInput.length === 0 ? toggleClass('ULSearchHidden') : toggleClass('ULSearchVisible');\n    let newFilteredUnits = originalDataRef.current.filter(item => {\n      return item.unit_name.toLowerCase().includes(searchInput.toLowerCase());\n    });\n    setFilteredUnits(newFilteredUnits);\n  };\n  useEffect(() => {\n    setULClass('ULSearchVisible');\n    filterUnits(datasource);\n  }, [searchInput, datasource]);\n  const SearchQry = searchwords => {\n    fetch('http://localhost/filtermanagerreact/php/ListEquipment.php?search_input=' + searchwords, {\n      method: 'GET',\n      credentials: 'include'\n    }).then(response => {\n      if (!response.ok) {\n        throw new Error('Network response was not ok from Search.jsx ' + response.statusText);\n      }\n      return response.text();\n    }).then(data => {\n      //console.log(\"Fetched Data from a search query Search.jsx:\", data);\n      setData(data);\n      setServerResponse(data);\n    }).catch(error => {\n      //console.log('Fetch Error:', error);\n      setServerResponse('An error occurred(Search.jsx):' + error.message);\n    });\n  };\n  function resetUnits() {\n    let newFilteredUnits = originalDataRef.current.map(item => {\n      return {\n        unit_name: item\n      };\n    });\n    setFilteredUnits(newFilteredUnits);\n  }\n  const handleKeyDown = event => {\n    if (event.key === 'Enter') {\n      event.preventDefault();\n      submitSearch();\n    }\n  };\n  useEffect(() => {\n    const inputElement = searchInputRef.current;\n    inputElement.addEventListener('keydown', handleKeyDown);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        input: true,\n        type: \"text\",\n        id: \"search-input\",\n        placeholder: \"Search\",\n        ref: searchInputRef,\n        value: searchInput,\n        onChange: event => {\n          setSearchInput(event.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"search-icon\",\n        style: {\n          fontWeight: \"bold\",\n          fontSize: \"2em\",\n          marginLeft: \"5px\",\n          display: search == '' ? \"none\" : \"block\"\n        },\n        onClick: () => setSearchInput(\"\"),\n        children: \"X\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: ULClass,\n        children: filteredUnits.map(unit => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"LiSearch\",\n          onClick: () => submitSearch(unit.unit_name),\n          children: unit.unit_name\n        }, unit.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: searchImage,\n        style: {\n          boxShadow: '4px 4px black',\n          height: '50px',\n          width: '50px',\n          marginLeft: '5px',\n          borderRadius: '30px',\n          border: '3px solid green',\n          textAlign: 'middle'\n        },\n        id: \"img_search\",\n        onClick: () => submitSearch()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"divServerResponse\",\n      style: {\n        display: 'none',\n        height: '200px',\n        width: '200px'\n      },\n      children: serverResponse\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n};\n_s(Search, \"YDSnAKP8ZeGG1I0WI8AUP3CSGtA=\", false, function () {\n  return [useDispatch];\n});\n_c = Search;\nexport default Search;\nvar _c;\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["React","useState","useContext","useEffect","useRef","manageEquipment","useDispatch","searchImage","jsxDEV","_jsxDEV","Search","_s","originalDataRef","filteredUnits","setFilteredUnits","searchInput","setSearchInput","newFilteredUnits","ULClass","setULClass","LiSearch","datasource","setdatasource","loading","setLoading","error","setError","searchInputRef","data","setData","dispatch","serverResponse","setServerResponse","submitSearch","obj","searchwords","current","value","action","toggleClass","classx","filterUnits","length","filter","item","unit_name","toLowerCase","includes","SearchQry","fetch","method","credentials","then","response","ok","Error","statusText","text","catch","message","resetUnits","map","handleKeyDown","event","key","preventDefault","inputElement","addEventListener","className","children","style","display","input","type","id","placeholder","ref","onChange","target","fileName","_jsxFileName","lineNumber","columnNumber","fontWeight","fontSize","marginLeft","search","onClick","unit","src","boxShadow","height","width","borderRadius","border","textAlign","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/fm_react_mysql/src/components/Search.jsx"],"sourcesContent":["import React, { useState, useContext, useEffect, useRef } from 'react'\r\nimport { manageEquipment } from '../thunks/listEquipmentThunk';\r\nimport { useDispatch } from 'react-redux';\r\nimport searchImage from '../images/search3.png';\r\n\r\nconst Search = () => {\r\n  const originalDataRef = useRef([]);\r\n  const [filteredUnits, setFilteredUnits] = useState([]);\r\n  let [searchInput, setSearchInput] = useState('');\r\n  let newFilteredUnits = useRef([]);\r\n  let [ULClass, setULClass] = useState('ULSearchHidden');\r\n  let LiSearch = useRef('LiSearch');\r\n  const [datasource, setdatasource] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const searchInputRef = useRef(null);\r\n  const [data, setData] = useState([])\r\n  const dispatch = useDispatch()\r\n  const[serverResponse, setServerResponse] = useState('')\r\n  \r\n\r\n\r\n  function submitSearch() {\r\n  \r\n    const obj={\r\n      searchwords:searchInputRef.current.value,\r\n      action:'search'\r\n    }\r\n    dispatch(manageEquipment(obj))\r\n    setULClass('ULSearchHidden');\r\n  }\r\n\r\n  const toggleClass = (classx) => {\r\n    //setULClass(prevClass => (searchInput.length === 0 ? 'ULSearchHidden' : 'ULSearchVisible'));\r\n\r\n    switch (classx) {\r\n      case 'ULSearchVisible':\r\n        setULClass('ULSearchVisible');\r\n        break;\r\n      case 'ULSearchHidden':\r\n        setULClass('ULSearchHidden');\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const filterUnits = () => {\r\n    searchInput.length === 0 ? toggleClass('ULSearchHidden') : toggleClass('ULSearchVisible');\r\n\r\n    let newFilteredUnits = originalDataRef.current.filter(item => {\r\n      return item.unit_name.toLowerCase().includes(searchInput.toLowerCase());\r\n    });\r\n    setFilteredUnits(newFilteredUnits);\r\n\r\n  }\r\n  useEffect(() => {\r\n    setULClass('ULSearchVisible');\r\n\r\n\r\n    filterUnits(datasource);\r\n  }, [searchInput, datasource]);\r\n  const SearchQry = (searchwords) => {\r\n    fetch('http://localhost/filtermanagerreact/php/ListEquipment.php?search_input=' + searchwords, {\r\n      method: 'GET',\r\n      credentials: 'include'\r\n    })\r\n      .then\r\n      (response => {\r\n        if (!response.ok) {\r\n          throw new Error('Network response was not ok from Search.jsx ' + response.statusText);\r\n        }\r\n        return response.text();\r\n      })\r\n      .then(data => {\r\n        //console.log(\"Fetched Data from a search query Search.jsx:\", data);\r\n        setData(data);\r\n        setServerResponse(data);\r\n      })\r\n      .catch(error => {\r\n        //console.log('Fetch Error:', error);\r\n        setServerResponse('An error occurred(Search.jsx):' + error.message);\r\n      });\r\n  }\r\n\r\n  function resetUnits() {\r\n    let newFilteredUnits = originalDataRef.current.map(item => {\r\n      return {\r\n        unit_name: item \r\n      };\r\n    });\r\n    setFilteredUnits(newFilteredUnits);\r\n\r\n  }\r\n\r\n\r\n\r\n  const handleKeyDown = (event) => {\r\n    if (event.key === 'Enter') {\r\n      event.preventDefault(); \r\n      submitSearch();\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    const inputElement = searchInputRef.current;\r\n    inputElement.addEventListener('keydown', handleKeyDown);\r\n  })\r\n\r\n  return (\r\n    <div className=\"search\">\r\n      <div style={{display:\"flex\"}}>\r\n        <input\r\n          input type=\"text\"\r\n          id=\"search-input\"\r\n          placeholder=\"Search\"\r\n          ref={searchInputRef}\r\n          value={searchInput}\r\n          onChange={event => { setSearchInput(event.target.value); }}\r\n\r\n        />\r\n        <span className='search-icon' style={{fontWeight:\"bold\", fontSize:\"2em\", marginLeft:\"5px\", display:search == '' ? \"none\" : \"block\"}} onClick={() => setSearchInput(\"\")}>X</span>\r\n        <ul className={ULClass} >\r\n          {filteredUnits.map(unit => (\r\n            <li className={\"LiSearch\"} key={unit.id} onClick={() => submitSearch(unit.unit_name)}>{unit.unit_name}</li>\r\n          ))}\r\n        </ul>\r\n        <img src={searchImage} style={{ boxShadow: '4px 4px black', height: '50px', width: '50px', marginLeft: '5px', borderRadius: '30px', border: '3px solid green', textAlign: 'middle' }} id=\"img_search\" onClick={()=>submitSearch()} />\r\n      </div>\r\n      <div id=\"divServerResponse\" style={{ display: 'none', height: '200px', width: '200px' }}>{serverResponse}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Search"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}