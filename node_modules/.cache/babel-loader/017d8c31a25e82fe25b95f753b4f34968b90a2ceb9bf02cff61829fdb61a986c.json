{"ast":null,"code":"import React,{useState,useContext,useEffect,useRef}from'react';import{manageEquipment}from'../thunks/listEquipmentThunk';import{useDispatch}from'react-redux';import searchImage from'../images/search3.png';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Search=()=>{const originalDataRef=useRef([]);const[filteredUnits,setFilteredUnits]=useState([]);let[searchInput,setSearchInput]=useState('');let newFilteredUnits=useRef([]);let[ULClass,setULClass]=useState('ULSearchHidden');let LiSearch=useRef('LiSearch');const[datasource,setdatasource]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const searchInputRef=useRef(null);const[data,setData]=useState([]);const dispatch=useDispatch();const[serverResponse,setServerResponse]=useState('');function submitSearch(){const obj={searchwords:searchInputRef.current.value,action:'search'};dispatch(manageEquipment(obj));setULClass('ULSearchHidden');}const toggleClass=classx=>{//setULClass(prevClass => (searchInput.length === 0 ? 'ULSearchHidden' : 'ULSearchVisible'));\nswitch(classx){case'ULSearchVisible':setULClass('ULSearchVisible');break;case'ULSearchHidden':setULClass('ULSearchHidden');break;default:break;}};const filterUnits=()=>{searchInput.length===0?toggleClass('ULSearchHidden'):toggleClass('ULSearchVisible');let newFilteredUnits=originalDataRef.current.filter(item=>{return item.unit_name.toLowerCase().includes(searchInput.toLowerCase());});setFilteredUnits(newFilteredUnits);};useEffect(()=>{setULClass('ULSearchVisible');filterUnits(datasource);},[searchInput,datasource]);const SearchQry=searchwords=>{fetch('http://localhost/filtermanagerreact/php/ListEquipment.php?search_input='+searchwords,{method:'GET',credentials:'include'}).then(response=>{if(!response.ok){throw new Error('Network response was not ok from Search.jsx '+response.statusText);}return response.text();}).then(data=>{//console.log(\"Fetched Data from a search query Search.jsx:\", data);\nsetData(data);setServerResponse(data);}).catch(error=>{//console.log('Fetch Error:', error);\nsetServerResponse('An error occurred(Search.jsx):'+error.message);});};function resetUnits(){let newFilteredUnits=originalDataRef.current.map(item=>{return{unit_name:item};});setFilteredUnits(newFilteredUnits);}const handleKeyDown=event=>{if(event.key==='Enter'){event.preventDefault();submitSearch();}};useEffect(()=>{const inputElement=searchInputRef.current;inputElement.addEventListener('keydown',handleKeyDown);});return/*#__PURE__*/_jsxs(\"div\",{className:\"search\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\"},children:[/*#__PURE__*/_jsx(\"input\",{input:true,type:\"text\",id:\"search-input\",placeholder:\"Search\",ref:searchInputRef,value:searchInput,onChange:event=>{setSearchInput(event.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"search-icon\",style:{fontWeight:\"bold\",fontSize:\"2em\",marginLeft:\"5px\",display:searchInput.length==0?\"none\":\"block\"},onClick:()=>setSearchInput(\"\"),children:\"X\"}),/*#__PURE__*/_jsx(\"ul\",{className:ULClass,children:filteredUnits.map(unit=>/*#__PURE__*/_jsx(\"li\",{className:\"LiSearch\",onClick:()=>submitSearch(unit.unit_name),children:unit.unit_name},unit.id))}),/*#__PURE__*/_jsx(\"img\",{src:searchImage,style:{boxShadow:'4px 4px black',height:'50px',width:'50px',marginLeft:'5px',borderRadius:'30px',border:'3px solid green',textAlign:'middle'},id:\"img_search\",onClick:()=>submitSearch()})]}),/*#__PURE__*/_jsx(\"div\",{id:\"divServerResponse\",style:{display:'none',height:'200px',width:'200px'},children:serverResponse})]});};export default Search;","map":{"version":3,"names":["React","useState","useContext","useEffect","useRef","manageEquipment","useDispatch","searchImage","jsx","_jsx","jsxs","_jsxs","Search","originalDataRef","filteredUnits","setFilteredUnits","searchInput","setSearchInput","newFilteredUnits","ULClass","setULClass","LiSearch","datasource","setdatasource","loading","setLoading","error","setError","searchInputRef","data","setData","dispatch","serverResponse","setServerResponse","submitSearch","obj","searchwords","current","value","action","toggleClass","classx","filterUnits","length","filter","item","unit_name","toLowerCase","includes","SearchQry","fetch","method","credentials","then","response","ok","Error","statusText","text","catch","message","resetUnits","map","handleKeyDown","event","key","preventDefault","inputElement","addEventListener","className","children","style","display","input","type","id","placeholder","ref","onChange","target","fontWeight","fontSize","marginLeft","onClick","unit","src","boxShadow","height","width","borderRadius","border","textAlign"],"sources":["C:/xampp/htdocs/fm_react_mysql/src/components/Search.jsx"],"sourcesContent":["import React, { useState, useContext, useEffect, useRef } from 'react'\r\nimport { manageEquipment } from '../thunks/listEquipmentThunk';\r\nimport { useDispatch } from 'react-redux';\r\nimport searchImage from '../images/search3.png';\r\n\r\nconst Search = () => {\r\n  const originalDataRef = useRef([]);\r\n  const [filteredUnits, setFilteredUnits] = useState([]);\r\n  let [searchInput, setSearchInput] = useState('');\r\n  let newFilteredUnits = useRef([]);\r\n  let [ULClass, setULClass] = useState('ULSearchHidden');\r\n  let LiSearch = useRef('LiSearch');\r\n  const [datasource, setdatasource] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const searchInputRef = useRef(null);\r\n  const [data, setData] = useState([])\r\n  const dispatch = useDispatch()\r\n  const[serverResponse, setServerResponse] = useState('')\r\n  \r\n\r\n\r\n  function submitSearch() {\r\n  \r\n    const obj={\r\n      searchwords:searchInputRef.current.value,\r\n      action:'search'\r\n    }\r\n    dispatch(manageEquipment(obj))\r\n    setULClass('ULSearchHidden');\r\n  }\r\n\r\n  const toggleClass = (classx) => {\r\n    //setULClass(prevClass => (searchInput.length === 0 ? 'ULSearchHidden' : 'ULSearchVisible'));\r\n\r\n    switch (classx) {\r\n      case 'ULSearchVisible':\r\n        setULClass('ULSearchVisible');\r\n        break;\r\n      case 'ULSearchHidden':\r\n        setULClass('ULSearchHidden');\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const filterUnits = () => {\r\n    searchInput.length === 0 ? toggleClass('ULSearchHidden') : toggleClass('ULSearchVisible');\r\n\r\n    let newFilteredUnits = originalDataRef.current.filter(item => {\r\n      return item.unit_name.toLowerCase().includes(searchInput.toLowerCase());\r\n    });\r\n    setFilteredUnits(newFilteredUnits);\r\n\r\n  }\r\n  useEffect(() => {\r\n    setULClass('ULSearchVisible');\r\n\r\n\r\n    filterUnits(datasource);\r\n  }, [searchInput, datasource]);\r\n  const SearchQry = (searchwords) => {\r\n    fetch('http://localhost/filtermanagerreact/php/ListEquipment.php?search_input=' + searchwords, {\r\n      method: 'GET',\r\n      credentials: 'include'\r\n    })\r\n      .then\r\n      (response => {\r\n        if (!response.ok) {\r\n          throw new Error('Network response was not ok from Search.jsx ' + response.statusText);\r\n        }\r\n        return response.text();\r\n      })\r\n      .then(data => {\r\n        //console.log(\"Fetched Data from a search query Search.jsx:\", data);\r\n        setData(data);\r\n        setServerResponse(data);\r\n      })\r\n      .catch(error => {\r\n        //console.log('Fetch Error:', error);\r\n        setServerResponse('An error occurred(Search.jsx):' + error.message);\r\n      });\r\n  }\r\n\r\n  function resetUnits() {\r\n    let newFilteredUnits = originalDataRef.current.map(item => {\r\n      return {\r\n        unit_name: item \r\n      };\r\n    });\r\n    setFilteredUnits(newFilteredUnits);\r\n\r\n  }\r\n\r\n\r\n\r\n  const handleKeyDown = (event) => {\r\n    if (event.key === 'Enter') {\r\n      event.preventDefault(); \r\n      submitSearch();\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    const inputElement = searchInputRef.current;\r\n    inputElement.addEventListener('keydown', handleKeyDown);\r\n  })\r\n\r\n  return (\r\n    <div className=\"search\">\r\n      <div style={{display:\"flex\"}}>\r\n        <input\r\n          input type=\"text\"\r\n          id=\"search-input\"\r\n          placeholder=\"Search\"\r\n          ref={searchInputRef}\r\n          value={searchInput}\r\n          onChange={event => { setSearchInput(event.target.value); }}\r\n\r\n        />\r\n        <span className='search-icon' style={{fontWeight:\"bold\", fontSize:\"2em\", marginLeft:\"5px\", display:searchInput.length == 0 ? \"none\" : \"block\"}} onClick={() => setSearchInput(\"\")}>X</span>\r\n        <ul className={ULClass} >\r\n          {filteredUnits.map(unit => (\r\n            <li className={\"LiSearch\"} key={unit.id} onClick={() => submitSearch(unit.unit_name)}>{unit.unit_name}</li>\r\n          ))}\r\n        </ul>\r\n        <img src={searchImage} style={{ boxShadow: '4px 4px black', height: '50px', width: '50px', marginLeft: '5px', borderRadius: '30px', border: '3px solid green', textAlign: 'middle' }} id=\"img_search\" onClick={()=>submitSearch()} />\r\n      </div>\r\n      <div id=\"divServerResponse\" style={{ display: 'none', height: '200px', width: '200px' }}>{serverResponse}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Search"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}